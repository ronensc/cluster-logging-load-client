apiVersion: v1
kind: Template
metadata:
  name: ${app_name}
objects:
  # Job
  - apiVersion: batch/v1
    kind: Job
    metadata:
      name: ${app_name}
    spec:
      completions: ${{replicas}}
      parallelism: ${{replicas}}
      template:
        metadata:
          labels:
            app: ${app_name}
            logFormat: myformat
        spec:
          restartPolicy: Never
          containers:
            - image: ${image}
              imagePullPolicy: IfNotPresent
              name: ${app_name}
              args:
                - "generate"
                - "--output-format"
                - "json"
                - "--totalLogLines"
                - "${total_log_lines}"
                - "--log-lines-rate"
                - "${log_lines_rate}"

parameters:
  - name: image
    value: "quay.io/openshift-logging/cluster-logging-load-client:latest"
  - name: replicas
    value: "1"
  - name: total_log_lines
    value: "1000"
  - name: log_lines_rate
    value: "1"
  - name: app_name
    value: myapp
